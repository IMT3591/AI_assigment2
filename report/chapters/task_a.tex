
\chapter{Task A}
\section{Environment description}
The environment is implemented as a weighted, un-directed graph, figure
\ref{fig:graph}.  The graph consist of Vertices(figure \ref{fig:uml_vert}) and
Edges(figure \ref{fig:uml_edge}) that is connected to each other.  By doing this
we can let the agent traverse the graph by itself using an implementation of the
shortest path algorithm as the heuristic for the A* algorithm to select the next
move to make. 

The environment also contains the possibility for marking edges as broken,
vertices as visited, and creating edges between Vertices.

\begin{figure}[h]\centering
\includegraphics[ width={0.7\textwidth} ]{pictures/graph}
\caption{The environment - A non-directed graph with weighted edges.}
\label{fig:graph}
\end{figure}


\subsection{Vertice}
Vertices are the junctions in graph in which the agents travels from and to
using the edges. The Vertices holds no significant value other than being the
agent's goal and intermediate locations. The vertices are connected to eachother
using edges. The Vertices consists of the following variables and functions as
depicted in the UML-class in figure \ref{fig:uml_vert}.

\begin{description}
\item [key:]			This is an integer value holding the reference key to the
	Vertice. It is assigned automatically during creation of the vertice using an
	auto incremented counter starting at 1.  This is used to identify a specific
	Vertice in the graph and the vertice list.
\item [name:]			This is an unused variable and is assigned to NULL during
	creation. It is meant to hold a small text describing the name of the Vertice,
	and is usefull if it the graph represents a map or other things that could be
	assigned a description using a name tag.
\item [visited:]	This is a boolean describing wether or not the Vertice has
	been visited. It is not currently used, but could be used to mark a cell as
	visited during traversal.
\item [nxtVert:]	This is a pointer to a Vertice object. This will point to
	either the next Vertice in the list or to the vTail object which represents
	the end of the vertice list.  For vTail this link will link back to itsself.
\item [eStart:]		This is an Edge pointer which is on construction initialized
	to an Edge object that points to NULL.  This edge is the starting element for
	the list of Edges stemming from the current Vertice to adjacent vertices.
	eStart is however a dummy-element that points to the first actual edge in the
	list.
\end{description}

\begin{figure}[h]\centering
	\includegraphics[ width={0.35\textwidth} ]{pictures/uml_vertice}
	\caption{UML description of a Vertice's variables and implemented functions}
	\label{fig:uml_vert}
\end{figure}




\subsection{Edge}
The edge objects depicts the links between vertices in the graph. Each vertice
is in charge of its own links to neighboring cells, which in turn requires that
the number of edges in the environment is $2E$.  Since it is un-directed the
vertices at both end points of the edge has to have a link to eachother.

This could be avoided by having a separated edgelist with pointers to both
vertices connected to the edge, but it would drastically increase search time.
In larger graphs it would maybe be mor feasable since it would require less
memory.

\begin{description}
\item[status:]	This boolean value holds the status of the edge, which means 
	whether or not it	is traversable.  This could be used to update the 
	environment dynamically runtime.
\item[cost:]		This is the integer value representing the cost of traveling the
	edge from current vertice to the linked vertice. This is the value used to
	calculate the heuristic of path costs.
\item[nxt:]			This is the a pointer to the next Edge in the edge list. The
	first edge in the list will be the dummy edge and the last element will point
	to NULL, which will result in a segfault if not handled properly.
\item[vert:]		This is a pointer to the linked Vertice in which the endpoint of
	the link is attached to.
\end{description}

\begin{figure}[h]\centering
	\includegraphics[ width={0.30\textwidth} ]{pictures/uml_edge}
	\caption{UML description of an Edge's variables and implemented functions}
	\label{fig:uml_edge}
\end{figure}



\subsection{Graph Construction}
As the program starts up we read the file "vertice.lst" which contains a number
stating how many vertices are going to be in the graph. After reading this
integer it continue with creating the vertices and adding them to our Vertice
list, figure \ref{fig:vert_list}, see section \ref{sec:vert_list} for details.

When all vertices are created we continue by reading the edge descriptions from
the file. The file format for edges are three integers representing the
following; "[START VERTICE ID]" "[END VERTICE ID]" "[TRAVEL COST]".

After reading the values we search using the "\textsc{findVertice( int )}"
function to find the two vertices and call the vertice function
"\textsc{createEdge(int, Vertice*)}". This will then create an edge from the
first vertice retrieved, with the specified cost that links to the other
retrieved vertice which is sent as a parameter. 

After creating the first edge it will create the second edge back to the first
vertice. Vertices is created in an unorganized list using a FIFO list.

After creating the environment one is left with a two structures, one being the
graph, figure \ref{fig:graph}, and the vertice list, figure \ref{fig:vert_list}.
Both structures consists of linked Vertice objects as shown in figure
\ref{fig:vert_struct}.

\begin{figure}[h]\centering
\includegraphics[ width={0.50\textwidth} ]{pictures/data_structure}
\caption{Illustration of the structure of a Vertice object}
\label{fig:vert_struct}
\end{figure}



\subsection{Vertice List}\label{sec:vert_list}
The vertice list is a list of Vertice objects where each Vertice is linked to
the next forming a FIFO\footnote{FIFO - First In First Out } list.  This list is
held on to by using two declared variables called "vStart" and "vTail". 

These two variables are two Vertice objects with no real information and are
only used as a start and end point for the list. 

The vTail element is used as to indicate the end of the list and it links back
to itsself to avoid going into a corrupt memory address during traversal. The
vStart will provide a handle to the list so one can start searching from the
front of the list.

The list is a single link chain, meaning the elements in the list only link two
the next item and not back to the previous item.

Each Vertice in the list has an internal list starting with the eStart variable,
an Edge object that acts as the same way as vStart. It is a dummy object used
for grabbing a hold of the Edge list. Each element in this list has a pointer to
an element in the Vertice list, which indicates that the current Vertice is
linked to this vertice in the graph at the specified cost.

As shown in figure \ref{fig:vert_list}, the first vertice has to edges that
links to two other vertices in the vertice list.  Indicated by red stipled
lines.  The two linked vertice elements will both have their own edge elements
linking back to the first vertice. As indicated by the blue and black stipled
lines in the figure.

\begin{figure}[h]\centering
\includegraphics[ width={0.9\textwidth} ]{pictures/vertice_list}
\caption{Illustration of the list holding all the Vertices in the graph
environment}
\label{fig:vert_list}
\end{figure}



\section{Agent}
The agent is created to traverse the graph using A* tree search algorithm. It
applies this using the heuristic value by extrapolating using the shortest path
algorithm implemented in "\textsc{shp( Vertice*, int )}" to calculate the
shortest path from the upcoming Vertice to the goal. Then joining this value to the
travel cost of getting to the upcoming Vertice.

\begin{description}
\item[goalKey:]		Integer value holding the key of the goal vertice element.
	This is used to check whether the current node is the goal state
\item[location:]	This is a Vertice pointer that holds the initial location of 
	agent.  This is used by the A* algorithm to provide the initial state of the
	agent.
\item[travCost:]	Currently unused, but its purpose is to hold the currently
	optimal travCost. Currently we are implementing this as a local variable
	instead.  travCost would be used to hold the optimal paths cost after
	finishing, but is not needed for this task.
\item[execCount:]	This is an integer value used to hold the number of executed
	lines of code. This value is used to display the time complexity of the
	algorithm instead of using the *nix time command to measure time.  This is
	because it provides a way more accurate measure of time as the computer clock
	and CPU is notoriusly unstable combination to measure time with.
\end{description}

\begin{figure}[h]\centering
\includegraphics[ width={0.4\textwidth} ]{pictures/uml_agent2}
\caption{UML description of the Agent class, in agen2.h/cpp}
\label{fig:uml_agent}
\end{figure}




\subsection{Fringe List}

\begin{description}
\item[]
\end{description}
\begin{figure}[h]\centering
\includegraphics[ width={0.4\textwidth} ]{pictures/uml_fringe}
\caption{UML description of the Fringe object}
\label{fig:uml_fringe}
\end{figure}


\section{A* Star Tree Search algorithm}

\begin{description}
\item[]
\end{description}

\begin{figure}
\centering
\includegraphics[ width={\textwidth} ]{pictures/tree_search}
\caption{A* star tree search algorithm}
\end{figure}


